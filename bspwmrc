#! /bin/sh

#Autostart Keybindings, Panel, Background, External Monitor
sxhkd &
panel &
feh --bg-fill ~/.wallpaper.jpg &
xrandr --output LVDS1 --primary
xrandr --output HDMI1 --mode 1920x1080 --right-of LVDS1
bspc config -m ^1 top_padding 15

#Main Config
bspc monitor -f primary
bspc config border_width         2
bspc config window_gap          12
bspc config top_padding         15

bspc config split_ratio          0.52
bspc config borderless_monocle   true
bspc config gapless_monocle      true
bspc config focus_by_distance    true
bspc config history_aware_focus  true

#Remove all windows by default and add later
bspc wm -r HDMI1
bspc wm -r LVDS1

if (xrandr | grep "HDMI1 connected" > /dev/null)
then
  if ( ! (bspc query -M | grep LVDS1 > /dev/null) && true)
  then
    bspc wm --add-monitor LVDS1 1366x768+0+0
  fi
  if ( ! (bspc query -M | grep HDMI1 > /dev/null) && true)
  then
    bspc wm --add-monitor HDMI1 1920x1080+1366+0
  fi
  bspc monitor HDMI1 -d web music docs
  bspc monitor LVDS1 -d dev misc
  bspc monitor -f HDMI
  bspc config top_padding 15
else
  if ( ! (bspc query -M | grep LVDS1 > /dev/null) && true)
  then
    bspc wm --add-monitor LVDS1 1366x768+0+0
  fi
  if ( (bspc query -M | grep HDMI1 > /dev/null) && true)
  then
    bspc wm -r HDMI1
  fi
  bspc monitor LVDS1 -d dev web music docs misc
fi
